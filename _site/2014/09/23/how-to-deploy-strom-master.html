<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		
                 <title>storm提交程序</title>
                 <meta content="嘴哥的博客" name="description">
                <meta content="storm  嘴哥 李坤然 likunran li kunran java mysql 博客 jd李坤然 广告 dsp ssp 精准通" name="keywords">
		<link rel="stylesheet" href="/css/main.css" />
		<link rel="stylesheet" href="/css/pygments_native.css" />
		<link rel="stylesheet" href="http://fonts.useso.com/css?family=Handlee">
<link rel="Shortcut Icon" href="http://www.uyicu.com/favicon.ico" type="image/x-icon" />
	</head>
	<body>
		<header id="header">
			<div class="header-info fix">
				<h1><a href="/">Hanhao bird</a></h1>
				<p class="describe">&lt;嘴哥  /&gt;</p>
				<nav class="navigation">
					<ul>
						<li><a href="/">首页</a></li>
						<li><a href="/archive.html">列表</a></li>
						<!--<li><a href="/sitemap.txt">网站地图</a></li>-->
						<li><a href="#none">关于</a></li>
					</ul>
				</nav>
			</div>
		</header><!--/header end-->

		<section id="content" class="fix">
			<article id="post">
	<a href="#" class="icon-fullscreen r" title="点击全屏显示"></a>
	<div class="c9">
		分类：
			
			<a href="/category.html#storm">storm</a>
			
			
		&emsp;&emsp;&emsp;&emsp;
		标签：storm, mysql, mybatis
		&emsp;&emsp;&emsp;&emsp;
		<time date="2014-09-23 00:00:00 +0800">2014-09-23</time>
	</div>

	<h1>storm提交程序</h1>

<p>storm 已经部署完成准备写个例子测试下storm安装是否成功。当然选择了经典的代码storm-starter-master</p>

<p>开发环境：</p>

<ul>
<li>idea</li>
<li>jdk 1.6</li>
<li>maven</li>
<li>git</li>
</ul>


<h2>下载 strom-starter-master</h2>

<p>运行 <code>git clone https://github.com/nathanmarz/storm-starter.git</code>，提示：</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">localhost:log likunran$ git clone https://github.com/nathanmarz/storm-starter.gi
Cloning into &#39;storm-starter.gi&#39;...
remote: Repository not found.
fatal: repository &#39;https://github.com/nathanmarz/storm-starter.gi/&#39; not found
localhost:log likunran$ git clone https://github.com/nathanmarz/storm-starter.git
Cloning into &#39;storm-starter&#39;...
remote: Counting objects: 756, done.
remote: Total 756 (delta 0), reused 0 (delta 0)
Receiving objects: 100% (756/756), 171.81 KiB | 117.00 KiB/s, done.
Resolving deltas: 100% (274/274), done.
Checking connectivity... done.</code></pre></div>


<h2>maven 安装</h2>

<p>运行 ｀maven' 命令查看 maven是否安装</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">localhost:log likunran$ maven
-bash: maven: command not found</code></pre></div>


<p>maven 没有安装，下载maven 配置环境变量</p>

<blockquote><p>./etc/profile 文件   全局共有配置，无论哪个用户登录，都会读取此> 文件
/etc/bashrc    （一般在这个文件中添加系统级环境变量）全局（公有）配置，bash shell执行时，不管是何种方式，都会读取此文件。
~/.bash_profile  （一般在这个文件中添加用户级环境变量）</p></blockquote>

<p>添加环境变量</p>

<blockquote><p>MAVEN_HOME=/Users/likunran/tools/apache-maven-2.2.1
PATH=$MAVEN_HOME/bin:$PATH
export MAVEN_HOME
export PATH</p></blockquote>

<p> <code>source .bash_profile</code></p>

<h2>项目编译</h2>

<p>   1.进入到storm-starter 文件夹 把 m2-pom.xml重命</p>

<blockquote><p>mv m2-pom.xml pom.xml</br>
mvn install</p></blockquote>

<p>   编译结果</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 9 seconds
[INFO] Finished at: Tue Sep 23 23:36:05 CST 2014
[INFO] Final Memory: 40M/85M</code></pre></div>


<p>编译过程中请保持外网是可以正常访问的</p>

<h2>部署 到storm</h2>

<p>1.进入 target目录看到storm-starter-0.0.1-SNAPSHOT-jar-with-dependencies.jar 文件已经存在。把文件部署到 storm</p>

<p>2.提交 <code>./storm jar /export/data/storm/storm-starter-0.0.1-SNAPSHOT-jar-with-dependencies.jar storm.starter.WordCountTopology wordcountTop －100</code></p>

<p>3.访问storm ui</p>

<p>http://10.37.129.3:8080/
图如下
<img src="/css/images/st2.png" alt="Alt text" height="300"></p>

<h1>总结</h1>

<p>有时候打包提交 会报错 Storm Found multiple defaults.yaml resources 。遇到这错误是因为storm的storm的defaultsyarm打进去了。这个文件在storm-core.jar里面已经有了，设置storm依赖的scope为provided好了</p>


	<div class="eof">-EOF-</div>

	<hr />
	<div class="page fix">
		
		<span class="prev"><a href="/2014/09/18/how-to-step-storm-on-centos.html">←《Centos 下 storm 单机部署》</a></span>
		
		
	</div>
	<hr />
</article>


<!--Disqus begin-->
<div id="comment">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'likunran'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
</div>
<!--Disqus end-->

<script src="/js/jquery-min.js"></script>
<script src="/js/Fullscreen.js"></script>
<script type="text/javascript">
$(function() {
	var global = window;

	// ============== Disqus 定义 ==============
	(function() {
		global.disqus_shortname = 'likunran';
		$('<script type="text/javascript" async ' +
		  'src="http://' + global.disqus_shortname + '.disqus.com/embed.js">' +
		  '<\/script>').appendTo('head');
	})();


	// =============== 全屏显示 ==================
	(function() {
		var icon = $( 'a.icon-fullscreen' ),
			fs, fsCallback;
		
		fsCallback = function(isFullscreen) {
				if (isFullscreen) {
					icon.addClass('expand').attr('title', 'ESC 退出全屏');
				}
				else {
					icon.removeClass('expand').attr('title', '点击全屏显示');
				}
			};
			
		fs = new Fullscreen({
				element: $('#post'),
				noSafari: true,
				callback: fsCallback
			});

		if (fs.fullscreenEnabled) {
			icon.on('click', function() {
				fs.toggleFullscreen();
				return false;
			});
		}
		else {
			icon.hide();
		}
	})();


	// ============== 目录提取 ===============
	(function() {
		// 设置无目录时，不显示
		if (!parseInt('', 10)) {
			return;
		}

		var dom = $('<fieldset id="catalogue"><legend>目录</legend></fieldset>'),
			count = 0;
		
		$('#post').find('h2,h3,h4,h5').each(function() {
			var name = 'catalogue_' + count++;
			dom.append('<div class="txt_' + this.tagName + '">' +
				'<a href="#' + name + '">' +
					this.innerHTML +
				'</a></div>');
			this.id = name;
		});

		dom.appendTo('body');
	})();
});
</script>
<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/button.js#uuid=&amp;style=5&amp;fs=4&amp;bgcolor=Green&amp;pophcol=1"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54961311-1', 'auto');
  ga('send', 'pageview');

</script>

		</section><!--/content end-->


		<footer id="footer">
			<p class="l">
				&copy;2014 <a href="/">Hanhao bird</a>
				&emsp;&emsp;&emsp;
				<a href="mailto:likunran@gmail.com" target="_blank">Email me</a>
				<span class="c9">|</span>
				<a href="https://github.com/calefy/calefy.github.com" target="_blank">Fork me on GitHub</a>
			</p>
			<p class="r">Powered by <a href="https://github.com/mojombo/jekyll" target="_blank">Jekyll</a></p>
			<p class="tac">
				『书到用时方恨少』
			</p>
			<!--getclicky begin-->
			<div class="c">
			</div>
			<!--getclicky end-->
		</footer><!--/footer end-->



	</body>
</html>
